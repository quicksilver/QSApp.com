RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Redirect changelog.php to GitHub releases page
RedirectMatch 301 ^/changelog\.php$ https://github.com/quicksilver/Quicksilver/releases/

# Redirect .php extensions to non-extension URLs (before shad rewrite)
RewriteRule ^([a-zA-Z0-9_-]+)\.php$ /$1 [R=301,L]

# Preserve manual folder and other real directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/manual
RewriteRule ^(.*)$ /dist/$1 [L]

RewriteRule ^manual$ /manual/ [R=301,L]
